<?xml version="1.0" encoding="UTF-8"?>
<!-- JVMXRay Integration Test Logback Configuration -->
<!-- This configuration is used by integration tests to log to the integration component directory -->
<configuration debug="true" scan="false" scanPeriod="1 minutes">

    <property name="LOG_HOME" value="${jvmxray.integration.logs}" />
    <property name="MSG_FMT_LG" value="C:IT | %d{YYYY.MM.dd 'at' HH:mm:ss z} | %thread | %5level | %logger | %X | %msg%n" />
    
    <appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>${MSG_FMT_LG}</pattern>
        </encoder>
    </appender>
    
    <!-- Rolling file appender for integration test events -->
    <appender name="INTEGRATIONEVENTS" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>${jvmxray.integration.logs}/integration-INTEGRATION-events.log</file>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>${jvmxray.integration.logs}/integration-INTEGRATION-events.%d{yyyy-MM-dd}.log</fileNamePattern>
            <maxHistory>30</maxHistory>
        </rollingPolicy>
        <encoder>
            <pattern>${MSG_FMT_LG}</pattern>
        </encoder>
    </appender>

    <!-- Rolling file appender for turtle test events -->
    <appender name="TURTLEEVENTS" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>${jvmxray.integration.logs}/integration-TURTLE-events.log</file>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>${jvmxray.integration.logs}/integration-TURTLE-events.%d{yyyy-MM-dd}.log</fileNamePattern>
            <maxHistory>30</maxHistory>
        </rollingPolicy>
        <encoder>
            <pattern>${MSG_FMT_LG}</pattern>
        </encoder>
    </appender>

    <!-- Rolling file appender for general integration test logs -->
    <appender name="TESTEVENTS" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>${jvmxray.integration.logs}/integration-TEST-events.log</file>
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>${jvmxray.integration.logs}/integration-TEST-events.%d{yyyy-MM-dd}.log</fileNamePattern>
            <maxHistory>30</maxHistory>
        </rollingPolicy>
        <encoder>
            <pattern>${MSG_FMT_LG}</pattern>
        </encoder>
    </appender>

    <!-- Logger for integration test classes -->
    <logger name="org.jvmxray.integration" level="INFO" additivity="false">
        <appender-ref ref="CONSOLE"/>
        <appender-ref ref="INTEGRATIONEVENTS"/>
    </logger>

    <!-- Logger for turtle test specific events -->
    <logger name="org.jvmxray.integration.turtle" level="DEBUG" additivity="false">
        <appender-ref ref="CONSOLE"/>
        <appender-ref ref="TURTLEEVENTS"/>
    </logger>

    <!-- Root logger catches all other test-related logs -->
    <root level="INFO">
        <appender-ref ref="CONSOLE"/>
        <appender-ref ref="TESTEVENTS"/>
    </root>
    
</configuration>